#!/usr/bin/env php
<?php

require __DIR__.'/../vendor/autoload.php';

use AkeneoEtl\Infrastructure\Command;
use AkeneoEtl\Infrastructure\EtlFactory;
use AkeneoEtl\Infrastructure\Profile\ConnectionProfileFactory;
use AkeneoEtl\Infrastructure\Profile\EtlProfileFactory;
use Symfony\Component\Console\Application;
use Symfony\Component\EventDispatcher\EventDispatcher;


$eventDispatcher = new EventDispatcher();
$etlFactory = new EtlFactory($eventDispatcher);
$connectionProfileFactory = new ConnectionProfileFactory();
$etlProfileFactory = new EtlProfileFactory();

$application = new Application('AkeneoEtl', 'git_version');
$application->add(new Command\TransformCommand($etlFactory, $connectionProfileFactory, $etlProfileFactory, $eventDispatcher));
$application->run();
